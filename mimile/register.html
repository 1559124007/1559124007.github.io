<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>米米乐商城—用户注册</title>
		<link rel="stylesheet" type="text/css" href="css/register.css" />
	</head>

	<body>
		<div id="" class="header wrapper">
			<img src="img/label.png" />
			<h3>欢迎注册</h3>
			<span id="" class="point">已注册，请 <a href="login.html"> 登录></a></span>
		</div>
		<div id="" class="content wrapper">
			<form method="get" ">
				<div id="" class="zcTitle">
					<h2>个人用户注册</h2>
				</div>
				<div id="" class="nc-login-content">
					<p><input type="text" id="text_phone" class="ncInput1" placeholder="手机号码" onchange="checkPhone()" /></p><span id="phonenumber"></span>
					<p><input type="password" id="text_password" class="ncInput1" placeholder="设置密码" onchange="checkPassword()" /></p><span id="password"></span>
					<p class="identifyCode">
						<input type="text" id="text_yanzheng" class="ncInput2" placeholder="验证码" onchange="checkYanzheng()" />
						<img src="img/index.png" />
						<span>看不清，换一张</span>
					</p>
					<span id="yanzhengma"></span>
					<p>
						<input type="text" id="text_message" class="ncInput2" placeholder="短信验证码" onchange="checkMessage()" />
						<input type="button" id="reget" class="reget" value="获取短信验证码" />
					</p>
					<span id="message"></span>
					<p><input type="text" id="text_tuijian" class="ncInput1" placeholder="好友推荐码(非必填)" onchange="checkTuijian()" /></p><span id="tuijian"></span>
					<p class="reading_protocol">
						<input type="checkbox" id="text_checked" class="" checked="checked" onchange="checkChecked()" />
						<span>阅读并同意 
							<a href="#">服务协议</a>
						</span>
					</p>
					<span id="checked"></span>
					<p class="ncInput3"><input type="button" id="to_submit" value="立即注册" /></p>
				</div>
			</form>
		</div>
		<div class="footer wrapper">
			<p>
				<a href="#">电脑节</a>|
				<a href="#">年货节</a>|
				<a href="#">批发商城</a>|
				<a href="#">合作及洽谈</a>|
				<a href="#">联系我们</a>|
				<a href="#">关于米米乐商城</a>|
				<a href="#">商家登录</a>|
				<a href="#">开店协议</a>|
				<a href="#">商家入驻</a>|
				<a href="#">手机版</a>|
				<a href="#">友情链接</a>|
				<a href="#">招聘英才</a>
				<!--<a href="#">米商</a>|
				<a href="#">8.8包邮</a>|
				<a href="#">电脑节</a>-->
			</p>
			<p>© 2016 www.mmloo.com 版权所有</p>
			<img src="img/cxlogo.png" />
		</div>
		<script type="text/javascript" src="js/public_element.js"></script>
		<script type="text/javascript">
			function checkPhone() {
				var regexp = /^[1][3-8]+\d{9}$/;
				var phone = $("#text_phone");
				if(regexp.test(phone.value)) {
					$("#phonenumber").innerHTML = '<img id="right" src="img/right.png"/>';
					return true;
				} else {
					$("#phonenumber").innerHTML = '<img id="error" src="img/error.png"/>' + "<span id='error_word' class='point'>您输入的有误，请重新输入。</span>";
					return false;
				}
			}

			function checkPassword() {
				var regexp = /^[A-Za-z0-9]{6,16}$/;
				var password = $("#text_password");
				if(regexp.test(password.value)) {
					$("#password").innerHTML = '<img id="right" src="img/right.png"/>';
					return true;
				} else {
					$("#password").innerHTML = '<img id="error" src="img/error.png"/>' + "<span id='error_word' class='point'>您输入的有误，请重新输入。</span>";
					return false;
				}
			}

			function checkYanzheng() {
				var yanzheng = $("#text_yanzheng").value;
				if(yanzheng == "brev") {
					$("#yanzhengma").innerHTML = '<img id="right" src="img/right.png"/>';
					return true;
				} else {
					$("#yanzhengma").innerHTML = '<img id="error" src="img/error.png"/>' + "<span id='error_word' class='point'>您输入的有误，请重新输入。</span>";
					return false;
				}
			}

			function checkMessage() {
				var message = $("#text_message").value;
				if(message == "123456") {
					$("#message").innerHTML = '<img id="right" src="img/right.png"/>';
					return true;
				} else {
					$("#message").innerHTML = '<img id="error" src="img/error.png"/>' + "<span id='error_word' class='point'>您输入的有误，请重新输入。</span>";
					return false;
				}
			}

			function checkTuijian() {

			}

			function checkChecked() {
				var check = $("#text_checked").checked;
				if(check) {
					$("#checked").innerHTML = '<img id="right" src="img/right.png"/>';
					return true;
				} else {
					$("#checked").innerHTML = '<img id="error" src="img/error.png"/>' + "<span id='error_word' class='point'>您输入的有误，请重新输入。</span>";
					return false;
				}
			}

			function checkForm() {
				if(checkPhone() && checkPassword() && checkYanzheng() && checkMessage() && checkChecked()) {
					return true;
				} else {
					return false;
				}
			}
		</script>
		<script type="text/javascript">
			var username = $("#text_phone");
			var password = $("#text_password");
			var btn = $("#to_submit");
			btn.onclick = function() {
				if(checkForm()) {
					setCookie(username, password, "d10");
					location.href = "http://127.0.0.1:8020/mimile_LS/login.html";
				}
				console.log(document.cookie);
			}

			function setCookie(key, val, str) {
				if(str[0] === "d") {
					var str = str.slice(1, str.length);
					str = parseInt(str) * 24 * 3600 * 1000;
				} else if(str[0] === "h") {
					var str = str.slice(1, str.length);
					str = parseInt(str) * 3600 * 1000;
				} else if(str[0] === "m") {
					var str = str.slice(1, str.length);
					str = parseInt(str) * 60 * 1000;
				} else if(str[0] === "s") {
					var str = str.slice(1, str.length);
					str = parseInt(str) * 1000;
				}
				var now = new Date();
				now.setTime(now.getTime() + str);
				document.cookie = key.value + "=" + encodeURIComponent(val.value) + ";expires=" + now.toGMTString();
			}
		</script>
	</body>

</html>